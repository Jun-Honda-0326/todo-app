@* コメントはこう書く *@
@import java.time.format.DateTimeFormatter
@import helper._

@import lib.model.Todo
@import lib.model.Category

@(vv: model.ViewValueTodo)(implicit requestHeader: RequestHeader, messagesPrivider: MessagesProvider)
@common.Default(vv){

@form(action = controllers.todo.routes.TodoController.search()){
  <input type = "search" name="keyword" style="height:35px;" style="margin-left:10px;">
  <input type = "submit" style="width: 80px;"value="検索">
}

<div class = "todoList">
@for(todo <- vv.todo){
    <div class="todoBox">
      <div class="todoBox__upper">
        <p class="todoBox__title">タイトル: @todo.title | </p>
        <p class="todoBox__category">カテゴリー: 
          <a class="@vv.category.find(_.id.get == todo.categoryId).map(_.color)" 
            href= "@controllers.category.routes.CategoryController.todoCategory(
            vv.category.find(_.id.get == todo.categoryId).flatMap(_.id).getOrElse(0))">
            @vv.category.find(_.id.get == todo.categoryId).map(_.name)
          </a>
          | </p> 

        <p class="todoBox__status">進捗: 
          <a class="todoBox__status-link" href="@controllers.todo.routes.TodoController.listOfState(todo.state.code.toInt)"> @todo.state.name
          </a> |
        </p> 

        <p class="todoBox__date">作成・更新日: @todo.updatedAt.format(DateTimeFormatter.ofPattern("yyy-MM-dd"))</p>
    </div>

      <div class="todoBox__down">
        <p class="todoBox__todo">@Html(todo.content.replaceAll("(\r\n|\r|\n)","<br>"))</p>
        <ul class="todoBox__ope">
          <button><a class = "todoBox__link" href = "@controllers.todo.routes.TodoController.edit(todo.id.getOrElse(0))">編集</a></button>
          <button><a class = "todoBox__link" href = "@controllers.todo.routes.TodoController.delete(todo.id.getOrElse(0))">削除</a></button>
        </ul>
      </div>

    </div>
 }
</div>
  
  

}
